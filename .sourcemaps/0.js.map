{"version":3,"sources":["../../src/pages/public-team-invitation/public-team-invitation.module.ts","../../src/pages/public-team-invitation/public-team-invitation.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PublicTeamInvitationPage } from './public-team-invitation';\n\n@NgModule({\n  declarations: [\n    PublicTeamInvitationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PublicTeamInvitationPage),\n  ],\n})\nexport class PublicTeamInvitationPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/public-team-invitation/public-team-invitation.module.ts","import {Component} from '@angular/core';\nimport {AlertController, App, IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {ChatService} from \"../../providers/pidge-client/chat-service\";\nimport {Chat} from \"../../models/chat\";\nimport {LoadingStacker} from \"../../providers/stacker/loading-stacker\";\nimport {AuthService} from \"../../providers/pidge-client/auth-service\";\nimport {LoadingPage} from \"../loading/loading\";\nimport {LoginPage} from \"../login/login\";\nimport {HomePage} from \"../home/home\";\nimport {StandardResponseAlert} from \"../../providers/services/standard-response-alert\";\n\n\n@IonicPage({\n  segment: 'team/:uqid/on-board'\n})\n@Component({\n  selector: 'page-public-team-invitation',\n  templateUrl: 'public-team-invitation.html',\n})\nexport class PublicTeamInvitationPage {\n\n  protected email;\n  protected name;\n  private team: Chat;\n\n  constructor(protected navCtrl: NavController,\n              protected navParams: NavParams,\n              protected chatService: ChatService,\n              protected alertCtrl: AlertController,\n              protected loadingStacker: LoadingStacker,\n              protected authService: AuthService,\n              protected standardAlert: StandardResponseAlert,\n              protected app: App) {\n\n    this.authService.loginLastUser()\n      .then(user => this.init(user))\n      .catch(e => this.authenticateFirst());\n  }\n\n  protected init(user) {\n    if (!user) {\n      return this.authenticateFirst();\n    }\n    this.chatService.chatInfo(this.navParams.get('uqid'))\n      .then(team => this.team = team);\n  }\n\n  protected authenticateFirst() {\n    return this.showError(\"Please authenticate\")\n      .then(() => this.navCtrl.setRoot('LoadingPage'))\n      .then(() => LoadingPage.loadedChange(true, 'LoginPage'))\n      ;\n  }\n\n  protected invite() {\n    this.loadingStacker.add();\n    this.chatService.inviteEmailToChat(this.team, this.email, {name: this.name})\n      .then(() => {\n        this.email = \"\";\n        this.name = null;\n      })\n      .then(() => this.standardAlert.showSuccess('Check your inbox for an invitation email, or if you have already created an account with Pidge, you should have been added already.', [], {\n        title: 'Thank You',\n        subTitle: 'Invitation Sent'\n      }))\n      .catch(err => this.showError(err))\n      .then(() => this.loadingStacker.pop());\n  }\n\n  protected showError(error) {\n    return this.standardAlert.showError(error);\n  }\n\n  protected backToTeam() {\n    this.app.getRootNav().setRoot('HomePage');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/public-team-invitation/public-team-invitation.ts"],"sourceRoot":""}